[global_tags]
  environment = "production"
  source = "host"

[[inputs.exec]]
  commands = [
    "tshark -l -T fields -E separator=, -E quote=d -e frame.time_epoch -e ip.src -e ip.dst -e ip.proto -e frame.len -i wlan0 -f 'ip' -a duration:10"
  ]
  timeout = "12s"
  interval = "15s"
  data_format = "csv"
  csv_header_row_count = 0
  csv_column_names = ["timestamp", "source", "destination", "protocol", "length"]
  csv_timestamp_column = "timestamp"
  csv_timestamp_format = "unix"
  name_override = "wireless_packets"

[[inputs.net]]
  interfaces = ["wlan0"]

[[outputs.influxdb_v2]]
  urls = ["http://localhost:8086"]  # We'll need to port-forward the InfluxDB service
  token = "${INFLUX_TOKEN}"
  organization = "your-org"
  bucket = "network-metrics"

[agent]
  interval = "15s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "15s"
  flush_jitter = "0s"